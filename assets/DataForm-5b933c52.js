import{u as be}from"./input-0aa0a466.js";import{u as ge}from"./errors-ebd9927f.js";import{_ as ye,r as w,c as v,o as Ve,b as s,d as h,l as T,F as M,f as S,J as he,E as x,g as m,h as t,V as ve,e as u,a2 as ke,M as Ue,a3 as De,a4 as Be,I as Ce,Y as I,a5 as Fe,a6 as Te,a7 as j,m as Oe,a1 as ze,z as _}from"./index-c1560e4c.js";const we={class:"body"},Me={class:"field-input"},Se={key:0,class:"field-toggle"},xe={key:0,class:"actions"},Ie={__name:"DataForm",props:{modelValue:{type:Object,default(){return{}}},fieldsLayout:{type:Array,default(){return[]}},dataFields:{type:Array,default(){return[]}},schemas:{type:Array,default(){return[]}},errorMessages:{type:Object,default(){return{}}},compact:{type:Boolean,default:!1},submittable:{type:Boolean,default:!0},confirmButton:{type:Object,default(){return{type:"text",icon:"fa-solid fa-check",value:"Confirm"}}},cancelButton:{type:Object,default(){return{type:"text",icon:"fa-solid fa-xmark",value:"Cancel"}}}},emits:["update:modelValue","submit","cancel"],setup(y,{emit:O}){const V=y,{schemasMap:k,serverOptionsKeys:L,inputType:p,inputLabel:l,inputableField:$,multiInputableField:E,multiSelectableField:U,singleSelectableField:P,nullToggleableField:D,nullToggleableKeys:A,objectField:N,fileField:H,formatInputOptionsData:K,fetchOptions:R,initOptionsData:J}=be(V.schemas),Y=ge(),B=w(A.value.reduce((a,r)=>(a[r]=!1,a),{}));function d(a){return!D(a)||B.value[a]}function q(a){return d(a)&&$(a)}function G(a){return d(a)&&H(a)}function Q(a){return d(a)&&(E(a)||N(a))}function W(a){return d(a)&&p(a)==="date"}function X(a){return d(a)&&p(a)==="datetime"}function Z(a){return d(a)&&(p(a)==="enum"||p(a)==="select")}function f(a){return d(a)&&p(a)==="daterange"}function ee(a){return d(a)&&p(a)==="datetimerange"}function ae(a){return d(a)&&p(a)==="boolean"}function i(a){return V.dataFields.find(r=>r===a)}function te(a){return`Has ${l(a)}`}function ne(a){return(p(a)==="select"||p(a)==="enum")&&k.value[a].options.length>30}function b(a){return V.errorMessages[a]?V.errorMessages[a].map(r=>Y[r.name](r.params)).join(", "):""}const C=w({});function g(a){return C.value[a]}function oe(a){return d(a)&&P(a)&&!!g(a)}function se(a){return d(a)&&U(a)&&!!g(a)}const z=v(()=>L.value.reduce((a,r)=>(a[r]=c=>{re(r,c)},a),{}));async function re(a,r){const c=k.value[a].limit||5;await R(a,r).then(F=>{C.value[a]=K(a,r,c,F)})}const n=v(()=>V.modelValue),ue=v(()=>V.compact?"form compact":"form");function le(a){return D(a)?"data-field toggleable":"data-field"}const me=v(()=>V.confirmButton),ce=v(()=>V.cancelButton);function pe(){O("submit",n.value)}function de(){O("cancel")}return Ve(async()=>{await J().then(a=>{C.value=a})}),(a,r)=>(s(),h("div",{class:x(t(ue))},[T("div",we,[(s(!0),h(M,null,S(y.fieldsLayout,(c,F)=>(s(),h("div",{key:F,class:"data-row"},[(s(!0),h(M,null,S(Object.keys(c),(e,ie)=>he(a.$slots,`form-col.${e}`,ze({key:ie},{field:e,type:t(p)(e),label:t(l)(e)}),()=>[T("div",{class:x(le(e))},[T("div",Me,[q(e)?(s(),m(t(ve),{key:0,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,type:t(p)(e),label:t(l)(e),size:c[e],disabled:!i(e),"error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","type","label","size","disabled","error-message"])):u("",!0),G(e)?(s(),m(t(ke),{key:1,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),size:c[e],disabled:!i(e),"error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","label","size","disabled","error-message"])):u("",!0),Q(e)?(s(),m(t(Ue),{key:2,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),disabled:!i(e),"error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled","error-message"])):u("",!0),W(e)?(s(),m(t(De),{key:3,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),disabled:!i(e),"align-pickers":"top","error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled","error-message"])):u("",!0),X(e)?(s(),m(t(Be),{key:4,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),disabled:!i(e),"display-time":!0,"align-pickers":"top","error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled","error-message"])):u("",!0),Z(e)?(s(),m(t(Ce),{key:5,id:e,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),name:e,options:t(k)[e].options,size:c[e],disabled:!i(e),searchable:ne(e),"error-message":b(e)},null,8,["id","modelValue","onUpdate:modelValue","label","name","options","size","disabled","searchable","error-message"])):u("",!0),oe(e)?(s(),m(t(I),{key:6,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),name:e,multiple:t(U)(e),options:g(e).data,"options-length":g(e).total,"options-loading":g(e).loading,pagination:g(e).pagination,size:c[e],disabled:!i(e),"error-message":b(e),onOffsetChange:t(z)[e]},null,8,["modelValue","onUpdate:modelValue","label","name","multiple","options","options-length","options-loading","pagination","size","disabled","error-message","onOffsetChange"])):u("",!0),se(e)?(s(),m(t(I),{key:7,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),name:e,multiple:t(U)(e),options:g(e).data,"options-length":g(e).total,"options-loading":g(e).loading,pagination:g(e).pagination,size:c[e],disabled:!i(e),"error-message":b(e),onOffsetChange:t(z)[e]},null,8,["modelValue","onUpdate:modelValue","label","name","multiple","options","options-length","options-loading","pagination","size","disabled","error-message","onOffsetChange"])):u("",!0),f(e)&&t(n)[e]?(s(),m(t(Fe),{key:8,"start-date":t(n)[e].startDate,"onUpdate:startDate":o=>t(n)[e].startDate=o,"end-date":t(n)[e].endDate,"onUpdate:endDate":o=>t(n)[e].endDate=o,label:t(l)(e),disabled:!i(e),"error-message":b(e)},null,8,["start-date","onUpdate:startDate","end-date","onUpdate:endDate","label","disabled","error-message"])):u("",!0),ee(e)&&t(n)[e]?(s(),m(t(Te),{key:9,"start-time":t(n)[e].startTime,"onUpdate:startTime":o=>t(n)[e].startTime=o,"end-time":t(n)[e].endTime,"onUpdate:endTime":o=>t(n)[e].endTime=o,label:t(l)(e),disabled:!i(e),"error-message":b(e)},null,8,["start-time","onUpdate:startTime","end-time","onUpdate:endTime","label","disabled","error-message"])):u("",!0),ae(e)?(s(),m(t(j),{key:10,modelValue:t(n)[e],"onUpdate:modelValue":o=>t(n)[e]=o,label:t(l)(e),disabled:!i(e),"error-message":b(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled","error-message"])):u("",!0)]),t(D)(e)?(s(),h("div",Se,[Oe(t(j),{modelValue:B.value[e],"onUpdate:modelValue":o=>B.value[e]=o,label:te(e)},null,8,["modelValue","onUpdate:modelValue","label"])])):u("",!0)],2)],!0)),128))]))),128))]),y.submittable?(s(),h("div",xe,[t(me)?(s(),m(t(_),{key:0,class:"button","button-type":y.confirmButton.type,value:y.confirmButton.value,icon:y.confirmButton.icon,onClick:r[0]||(r[0]=c=>pe())},null,8,["button-type","value","icon"])):u("",!0),t(ce)?(s(),m(t(_),{key:1,class:"button","button-type":y.cancelButton.type,value:y.cancelButton.value,icon:y.cancelButton.icon,onClick:r[1]||(r[1]=c=>de())},null,8,["button-type","value","icon"])):u("",!0)])):u("",!0)],2))}},$e=ye(Ie,[["__scopeId","data-v-ec885854"]]);export{$e as D};
