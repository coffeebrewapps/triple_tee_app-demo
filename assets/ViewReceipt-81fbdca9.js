import{u as A}from"./input-e6f00a84.js";import{_ as H,u as K,B as P,j as U,v as q,k as z,c as G,r as d,o as J,d as t,e as n,h as y,i as a,I as Q,f as l,x as I,F as C,g as D,n as S,y as V}from"./index-fa09a166.js";import{u as W}from"./utils-253c3d05.js";import{T as X}from"./TabContainer-f559d0bb.js";import{T as Y}from"./TemplateEditor-7fbf5e00.js";const Z={class:"page-container"},$={key:0,class:"details-container"},ee={class:"field-label"},te={class:"field-value"},ae={key:0},se={key:1},ne={__name:"ViewReceipt",props:{contactId:{type:String,default:null},receiptId:{type:String,default:null},invoiceId:{type:String,default:null}},setup(R){const p=R,_=K(),{isEmpty:g,notEmpty:f}=P(),{flashMessage:i}=U(),x=q(),b=z(),{fieldsLayout:B,generateDataFields:L}=W(),h=G(()=>L(p.invoiceId,p.contactId)),{inputLabel:F,inputValue:j,includeKeys:k}=A(h.value),s=d(),c=d(),w=d();async function T(){s.value=null;const e={include:k.value};await _.view("income_receipts",p.receiptId,e).then(o=>{s.value=o,i("Loaded receipt successfully!")}).catch(o=>{b.error("Error loading receipt",o),i("Error loading receipt!")})}async function M(){c.value=null,_.view("income_receipts",s.value.id,{},{path:"template_data"}).then(e=>{c.value=e.receiptTemplate;const o=e.country,v=e.logo,m=Object.assign({},e.billingContact,{country:o.countryName,logo:v.rawData});w.value=Object.assign({},e,{billingContact:m}),i("Loaded template data successfully!")}).catch(e=>{b.error("Error loading template data",e),i("Error loading template data!")})}const r=d(0),E=[{label:"Details",onchange:T},{label:"View Receipt PDF",onchange:M}];async function N(e){await E[e].onchange(),r.value=e}return J(async()=>{await T()}),(e,o)=>(t(),n("div",Z,[s.value?l("",!0):(t(),y(a(Q),{key:0})),s.value?(t(),y(X,{key:1,"selected-tab":r.value,tabs:E,onTabChange:N},{"tab-0":I(()=>[r.value===0?(t(),n("div",$,[(t(!0),n(C,null,D(a(B),(v,m)=>(t(),n("div",{key:m,class:"data-row"},[(t(!0),n(C,null,D(Object.keys(v),(u,O)=>(t(),n("div",{key:O,class:"data-field"},[S("div",ee,V(a(F)(u)),1),S("div",te,[a(f)(s.value)&&a(f)(s.value[u])?(t(),n("span",ae,V(a(j)(u,s.value,a(k),a(h),a(x))),1)):l("",!0),a(g)(s.value)||a(g)(s.value[u])?(t(),n("span",se," --- no value --- ")):l("",!0)])]))),128))]))),128))])):l("",!0)]),"tab-1":I(()=>[r.value===1&&c.value?(t(),y(Y,{key:0,id:c.value.id,"template-type":"receipt_templates","content-markup":c.value.contentMarkup,"content-styles":c.value.contentStyles,data:w.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):l("",!0)]),_:1},8,["selected-tab"])):l("",!0)]))}},ue=H(ne,[["__scopeId","data-v-42001c91"]]);export{ue as default};
