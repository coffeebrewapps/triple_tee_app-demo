import{_ as k,u as w,a as x,r as y,c as E,o as S,b as s,d as u,e as d,F as P,f as B,g,h as v,C as T,T as A}from"./index-9e5b3068.js";const L={class:"page-container"},O={key:0},D={key:1,class:"charts"},H={__name:"HomeView",setup(F){const m=w(),_=x(),l=y([]),i=y(getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-bright")),h=y(getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-dark")),f=E(()=>({highlightColor:i.value,lineColor:h.value}));_.registerListener("themeChange",{id:"RefreshChartColors",invoke:({newVal:o})=>{o?(i.value=getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-bright"),h.value=getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-bright-less")):(i.value=getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-bright"),h.value=getComputedStyle(document.documentElement).getPropertyValue("--vt-c-brown-dark")),b()}});function b(){l.value.forEach(o=>{o.config.colors=f.value})}async function C(){await m.list("chart_configs",{}).then(o=>{const a=o.data.sort((r,e)=>r.displayOrder<e.displayOrder?-1:r.displayOrder>e.displayOrder?1:0).map(r=>new Promise((e,n)=>{m.view("chart_configs",r.id,{},{path:"data"}).then(t=>{e({config:r,result:t})}).catch(t=>{n(t)})}));Promise.all(a).then(r=>{l.value=[],r.forEach(({config:e,result:n})=>{if(n.length===0)return;const t={title:e.description},p=[];e.chartType==="vbar"?(t.yScale=e.scaleValue,t.yAxisLabel=e.scaleUnit,t.xAxisLabel=e.groupBy,n.forEach(c=>{p.push({xValue:c.key,yValue:c.total})})):(t.xScale=e.scaleValue,t.xAxisLabel=e.scaleUnit,t.yAxisLabel=e.groupBy,n.forEach(c=>{p.push({yValue:c.key,xValue:c.total})})),l.value.push({chartType:e.chartType,config:t,data:p})})})}).catch(o=>{console.error(o)})}return S(async()=>{await C()}),(o,V)=>(s(),u("div",L,[l.value.length===0?(s(),u("div",O," No chart data. ")):d("",!0),l.value.length>0?(s(),u("div",D,[(s(!0),u(P,null,B(l.value,(a,r)=>(s(),u("div",{key:r,class:"chart"},[a.chartType==="vbar"&&a.data.length>0?(s(),g(v(T),{key:0,config:a.config,data:a.data},null,8,["config","data"])):d("",!0),a.chartType==="hbar"&&a.data.length>0?(s(),g(v(A),{key:1,config:a.config,data:a.data},null,8,["config","data"])):d("",!0)]))),128))])):d("",!0)]))}},U=k(H,[["__scopeId","data-v-3f1ebbb0"]]);export{U as default};
