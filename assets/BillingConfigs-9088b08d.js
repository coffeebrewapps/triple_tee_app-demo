import{x as D,q as F,d as g,o as c,g as V,s as o,v as d,t as i,j as p,c as m,z as L,B as q,C as z,h as a,D as N}from"./index-4aadfbc8.js";import{D as U}from"./DataPage-b5787fe6.js";import"./input-f75b7148.js";import"./errors-29306128.js";import"./DataForm-42274987.js";const G={__name:"BillingConfigs",props:{contactId:{type:String,default:null}},setup(y){const s=y,{notEarlierThan:v,greaterThanOrEqual:T}=D(),{formatTagSync:C,tagStyle:S}=N(),E=F().getSystemConfigs(),h=[{description:"lg"},{effectiveStart:"md",effectiveEnd:"md"},{rateType:"md",unitCost:"md",unit:"md"},{includeTags:"lg",excludeTags:"lg"},{contactId:"lg"}],k=g(()=>[{key:"id",type:"text",label:"ID",listable:!0,viewable:!0,creatable:!1,updatable:!1,sortable:!0},{key:"description",type:"text",label:"Description",listable:!0,viewable:!0,creatable:!0,updatable:!0},{key:"effectiveStart",type:"datetime",label:"Effective Start",listable:!0,viewable:!0,creatable:!0,updatable:!1,filterable:!0,sortable:!0},{key:"effectiveEnd",type:"datetime",label:"Effective End",listable:!0,viewable:!0,creatable:!0,updatable:!0,filterable:!0,sortable:!0},{key:"rateType",type:"enum",label:"Rate Type",listable:!0,viewable:!0,creatable:!0,updatable:!1},{key:"unit",type:"enum",label:"Unit",listable:!0,viewable:!0,creatable:!0,updatable:!1},{key:"unitCost",type:"number",label:"Unit Cost",listable:!0,viewable:!0,creatable:!0,updatable:!1},{key:"includeTags",type:"multiSelect",label:"Include Tags",isTags:!0,reference:{label:l},listable:!0,viewable:!0,creatable:!0,updatable:!0,filterable:!0,options:{server:!0,pagination:!0,modelClass:"tags",value:n,label:l}},{key:"excludeTags",type:"multiSelect",label:"Exclude Tags",isTags:!0,reference:{label:l},listable:!1,viewable:!0,creatable:!0,updatable:!0,filterable:!0,options:{server:!0,pagination:!0,modelClass:"tags",value:n,label:l}},{key:"contactId",type:"singleSelect",label:"Contact",reference:{label:f},defaultValue:()=>s.contactId,listable:!0,viewable:!0,creatable:!0,updatable:!1,filterable:!0,options:{server:!0,pagination:!0,modelClass:"contacts",value:n,label:f}}]),w={oneline:!0,showHeader:!1,highlightField:"description"},x={create:{unitCost:[e=>T(e,"unitCost",0)],effectiveEnd:[_]}},I=g(()=>{const e={};return s.contactId&&(e.contactId=[{value:s.contactId}]),e.effectiveStart={startTime:null,endTime:null},e.effectiveEnd={startTime:null,endTime:null},{initData:e,layout:[{effectiveStart:"md"},{effectiveEnd:"md"},{includeTags:"lg",excludeTags:"lg"},{contactId:"lg"}],disable:["contactId"]}});function _(e){return v(e,"effectiveEnd","effectiveStart")}function n(e){return e.id}function l(e){return`${e.category}:${e.name}`}function f(e){return e.name}return(e,j)=>(c(),V(U,{"model-class":"billing_configs","data-type":"Billing Configs",fullscreen:!0,"fields-layout":h,"data-fields":a(k),validations:x,filters:a(I),"table-style":w},{["highlight.description"]:o(({formattedValue:t})=>[d(i(t),1)]),["data-col.unitCost"]:o(({row:t,formattedValue:r,inputValue:u})=>[d(" Charging "),p("strong",null,i(r),1),d(" per "),p("strong",null,i(u("unit",t)),1)]),["data-col.includeTags"]:o(({row:t,key:r,rawValue:u})=>[(c(!0),m(L,null,q(u,(b,B)=>(c(),m("span",{key:B,class:"tag inline",style:z(a(S)(t,b,r))},i(a(C)(t,b,r,a(E).tagFormat)),5))),128))]),_:2},1032,["data-fields","filters"]))}};export{G as default};
