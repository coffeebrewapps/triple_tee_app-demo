import{_ as w,u as k,a as b,r as E,c as p,o as B,b as o,d as c,e as d,F as A,f as L,g,h as m,M as O,K as T}from"./index-ff7a0a98.js";const D={class:"page-container"},P={key:0},S={key:1,class:"charts"},H={__name:"HomeView",setup(M){const y=k(),_=b(),l=E([]),f=p(()=>window.getComputedStyle(document.documentElement).getPropertyValue("--color-text")),v=p(()=>window.getComputedStyle(document.documentElement).getPropertyValue("--color-border")),x=p(()=>({highlightColor:f.value,lineColor:v.value}));function i(s){return`${s[0].toUpperCase()}${s.slice(1)}`}async function C(){await y.list("chart_configs",{}).then(s=>{const a=s.data.sort((r,e)=>r.displayOrder<e.displayOrder?-1:r.displayOrder>e.displayOrder?1:0).map(r=>new Promise((e,u)=>{y.view("chart_configs",r.id,{},{path:"data"}).then(t=>{e({config:r,result:t})}).catch(t=>{_.error("Error loading chart configs",t),e({config:{},result:[]})})}));Promise.all(a).then(r=>{l.value=[],r.forEach(({config:e,result:u})=>{if(u.length===0)return;const t={title:e.description,colors:x.value},h=[];e.chartType==="vbar"?(t.yScale=e.scaleValue,t.yAxisLabel=i(e.scaleUnit),t.xAxisLabel=i(e.groupBy),u.forEach(n=>{h.push({xValue:n.key,yValue:n.total})})):(t.xScale=e.scaleValue,t.xAxisLabel=i(e.scaleUnit),t.yAxisLabel=i(e.groupBy),u.forEach(n=>{h.push({yValue:n.key,xValue:n.total})})),l.value.push({chartType:e.chartType,config:t,data:h})})})}).catch(s=>{_.error("Error listing charts",s)})}return B(async()=>{await C()}),(s,V)=>(o(),c("div",D,[l.value.length===0?(o(),c("div",P," No chart data. ")):d("",!0),l.value.length>0?(o(),c("div",S,[(o(!0),c(A,null,L(l.value,(a,r)=>(o(),c("div",{key:r,class:"chart"},[a.chartType==="vbar"&&a.data.length>0?(o(),g(m(O),{key:0,config:a.config,data:a.data},null,8,["config","data"])):d("",!0),a.chartType==="hbar"&&a.data.length>0?(o(),g(m(T),{key:1,config:a.config,data:a.data},null,8,["config","data"])):d("",!0)]))),128))])):d("",!0)]))}},F=w(H,[["__scopeId","data-v-d0391162"]]);export{F as default};
